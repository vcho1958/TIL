## P2P
일부 노드에 역할 부여가 불가능하므로 단일 장애점(Single Point Of Failure, SPOF)가 없습니다. 
규모가 커질수록 복원력이 뛰어남.
#### 버킷 릴레이
어떤 노드가 장애가 일어났을 때 나머지에서 자원을 사용해 전체 성능이 나빠지는 경우,
예를 들어 노드 하나가 나갔을 때 어떤 노드의 자원을 그노드의 자원으로 쓰고 이게 꼬리를 무는 현상

악의적인 데이터가 퍼졌을 때 해당 데이터를 제거하기 어려움

# 인터넷 서비스가 보장하는 세가지 특성
- 일관성
- 가용성
- 분할 내성: 분산 시스템에서 네트워크 연결이 끊어져도 서비스가 멈추면 안된다

# CAP
인터넷은 세가지 특성을 모두 만족할 수 없다는 정리
RDB(중앙화 방식): 분할 내성이 없다.
P2P: 일관성이 없다(여러 노드에서 받으므로)
일관된 해싱 타입: 가용성을 만족하지 못한다.


블록체인은 P2P방식입니다.
따라서 동시에 같은 이름의 트랜잭션을 남기지 않기 위해
트랜잭션 내부를 단방향 해쉬함수를 거쳐 나온 것을 이름으로 합니다.

또한 외부에서 수정이 불가능하기 때문에 변조위험이 있는
공인 정보(신분증, 경력)를 P2P 분산 데이터 스토리지에 저장하면 매우 유용할 것입니다.

## 분산 컴퓨팅
블록체인에서는 모두가 같은 연산을 수행하고 결과가 같은지 검증하는 합의를 해야합니다.

### 퍼블릭 체인에서
그러나 퍼블릭 체인은 키를 중앙에서 관리하지 않아 몇개의 노드인지 파악이 불가능해 다수결로 합의할 수 없습니다.
#### 비잔티움 장애 허용
반역자가 절반 이상일 때 장애가 생길 상황을 해결하는 과정이
블록체인의 합의 형성 개념입니다.
- 반역자가 절반 이상일경우 : 올바르지 않은 게 다수결
- 소수의 반역자가 거짓정보를 전파할 경우 : 누구 팀인지 불확실해 올바른쪽도 동요할 수 있음

#### 블록체인 등장 후
올바른 선택을 한 사람에게 암호화폐 등 경제적 보상을 지급합니다.
아닌 사람은 얻지 못하는데 이게 작업증명과 지분 증명이라는 합의 형성 알고리즘입니다.
- 이전에는 개인 사용자에게 선택권
- 이후에는 틀린선택을 한 사용자에게는 지급하지 않으므로 올바른 선택을 하는 사용자가 많아짐

### 프라이빗 체인에서
프라이빗 체인은 리더를 정한 후 그 의견에 따르는 것입니다.
관리자가 결정 권한이 있는경우를 중앙화 시스템 합의
관리자가 자료를 보고 결정 후 제안했을 때 다수결로 체크하는 분산시스템 합의

## 작업 증명
트랜잭션 풀에 있는 데이터를 꺼내면서 이전 블록의 해시값과 타임스탬프를 블록에 포함합니다.
논스라는 블록 해시를 찾기위해 사용하는 마크용 숫자를 첨가합니다. 해당 블록 해시값 앞에 특정 자릿 수 만큼 0이 있을 때까지 연산합니다.
해당 논스를 찾는 것이 작업 증명의 핵심입니다. 그 노드가 신규 발행을 인정 받고 트랜잭션을 파내는 행위가 채굴같다하여 채굴이라고 합니다.

## 지분 증명
코인 에이지 = 화폐 보유량 * 화폐 보유 기간
성공 시 얻는 보상은 코인 에이지 설정값에 비례합니다. 작업 증명처럼 일정량이 발행되는 것이 아니고 화폐보유량에 따라 난이도가 낮아지기 때문에 부익부 빈익빈이 될 가능성이 커서
코인 에이지 계산에 높은 계수를 곱하는 등의 방법이 있습니다.

#### 무신뢰 합의 형성이 필요하면 퍼블릭
합의형성이 느리나 누구나 사용할 수 있다. = 누구나 열람할 수 있다.


#### 합의 형성 속도가 중요하면 프라이빗 체인
노드 수가 적다면 프라이빗 체인이 좋다.
노드가 많아지면 제로 다운타임 성능이 낮아진다.



### 소프트 포크
기존의 사양중 저장 방식만 변경하자. -BTC :소프트포크
아예 블록의 크기 제한을 없애자 - BCH :하드포크