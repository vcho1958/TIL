# 논스
논스는 트랜잭션이 몇번째인지 나타내는 스칼라값이다.
따라서 순서를 보장한다.
만약 계좌에 6이더와 8이더가있을 때 잔액이 부족하다면 둘중하나가 취소돼야한다.
이 때 논스를 기준으로 해당 작업을 수행한다.
발신 EOA에 의해 메시지 재사용방지를 위한 일련번호


## 가스 가격
발신자가 지급하는 가스의 가격(웨이)

## 가스 한도
이 트랜잭션을 위해 구입할 가스의 최대량

### v,r,s
EOA의 ECDSA 디지털 서명의 세 가지 구성요소

발신자 주소는 v, r, s의 구성요소로부터 공개키를 알아낼 수 있다.

수신자 주소는 to 필드에 지정된다. 20바이트 이더리움 주소이며 컨트랙트 주소일 수 있다.

주소 확인은 인터페이스 레이어에서 처리해야한다.

고의로 무의미한 주소로 트랜잭션을 보내는 연소의 경우 지급 채널 및 기타 스마트 컨트랙트에서의 부정행위를 저지하는 것이나 유한한 이더의 양을 기반으로 같은 네트워크의 사용자에게 재분배하는 목적일 수 있다.



트랜잭션은 중복으로 보냈을 때 바로 건수를 늘리지 않는다.

멤풀에도 보류중인 트랜잭션은 보이지 않는다.
해당 트랜잭션의 처리가 완료됐을 때 멤풀 및 개수에 반영된다.

parity_nextNonce는 트랜잭션 멤풀에 등록되지않아도 바로 다음 논스를 정확하게 계산한다.

만약 논스의 순서가 틀리다면 누락시키고 넘긴트랜잭션은 멤풀에 쌓이고 누락된 트랜잭션이 전송되면 그제서야 반영이 된다.

가스가 모자란 경우 갭이 생겨 지연될 수 있으므로 주의

동시성 문제를 해결하기 위해 논스를 할당하지 않고 중앙노드로 넘겨 처리할 수도 있다.

가스의 양에 따라 처리되는 우선순위가 다르다.



가스가격 * 가스요금

스마트 계약이 전역 카운트를 활용할 때 특정번째 트랜잭션의 비용이 더 높을 수 있다.

# 페이로드

## 지급
값만 있는 트랜잭션

## 호출
데이터만 있는 트랜잭션

to 가 컨트랙트라면 데이터 페이로드에 지정된 함수를 호출한다.
미지정이라면 폴백함수를 호출한다. 가스가 충분하다면 함수를 실행한다.
폴백함수가 없다면 value만큰 컨트랙트의 잔액을 늘린다.

지갑에 따라 데이터를 사용할 수도 있다.


# ABI 호환 컨트랙트

## 함수 선택기
함수 프로토타입의 Keccak-256 해시의 처음 4바이트다. 호출할 함수를 정확하게 식별할 수 있다.
## 함수 인수
파라미터는 ABI사양에 따라 인코딩된다.

# 컨트랙트 생성
제로 어드레스 0x0을 to에 지정하고 새로운 컨트랙트를 배포한다.
의도적인 이더 연소를 위해 제로 어드레스를 사용한다.
그러나 의도적이라면 0x000...dEaD 주소를 사용해야한다.

값 필드에 이더를 포함해 최초 잔액을 설정할 수도 있다.
컨트랙트 파일을 바이트코드로 컴파일하여 페이로드에 전달해야한다.

## 디지털 서명
1. 이더리움 계정과 개인키 소유자가 지출, 컨트랙트 이행을 승인했음을 증명한다.
2. 부인방지를 보장한다.
3. 누구도 수정 불가능을 증명한다.
4. 서명을 할 땐 개인키 검증을 할땐 공개키를 사용한다.
r,s 두 값의 서명 Sig를 생성한다.

안전한 난수 q를 해시를 통해 생성한 Q 타원곡선 생성자 점 G
r: 일시적인 공개키 Q의 x좌표이다.
s: $q^-1(Keccak256(m) + r * k) (mod p)$ 
k: 개인 키
m: 트랜잭션 데이터
p: 타원 곡선의 소수 차수

r, s 를 공개키로 타원곡선의 Q를 계산하는 것을 검증이라고 한다.

# 체인ID

EIP-155 단순 재생 공격 방지 표준은 서명 전 내부에 체인 ID를 포함하여 인코딩 방식을 지정한다.
그럼 한 네트웤에서 다른 네트워크의 트랜잭션이 호환되지 않는다.
